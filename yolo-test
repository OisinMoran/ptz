
import cv2
from picamera2 import Picamera2




# Initialize the Picamera2
picam2 = Picamera2()
picam2.preview_configuration.main.size = (640, 480)
picam2.preview_configuration.main.format = "RGB888"
picam2.preview_configuration.align() # what mean?
picam2.configure("preview") # what mean?
picam2.start()

# Load the YOLO11 model
model = YOLO("yolo11n.pt")

while True:
    # Capture frame-by-frame
    frame = picam2.capture_array()
    # Run YOLO11 inference on the frame
    results = model.track(frame, conf=0.5, persist=True)
    for result in results:
        if result.names[int(result.boxes.cls)] == 'person':
            id_of_interest = result.boxes.id
            x,y,w,h = result.boxes.xywh[0]

    # Visualize the results on the frame
    annotated_frame = results[0].plot()
    # Display the resulting frame
    cv2.imshow("Camera", annotated_frame)
    # Break the loop if 'q' is pressed
    if cv2.waitKey(1) == ord("q"):
        break

# Release resources and close windows
cv2.destroyAllWindows()